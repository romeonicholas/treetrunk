<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="data:," />
    <style>
      @font-face {
        font-family: "Gotham";
        src: url("/fonts/Gotham-Medium.eot");
        src: url("/fonts/Gotham-Medium.eot") format("embedded-opentype"),
          url("/fonts/Gotham-Medium.woff2") format("woff2"),
          url("/fonts/Gotham-Medium.woff") format("woff"),
          url("/fonts/Gotham-Medium.ttf") format("truetype");
      }

      :root {
        --pad: 20px;
        --gap: 20px;
        --text: #121212;
        --muted: #666;
        --bg: #fff;
      }

      html,
      body {
        height: 100%;
        font-size: 14px;
      }
      body {
        margin: 0;
        font-family: "Gotham", Arial, sans-serif;
        color: var(--text);
        background: var(--bg);
      }

      .page {
        height: 100dvh;
        padding-inline: var(--pad);
        display: grid;
        grid-template-rows: auto auto auto;
        gap: var(--gap);
        place-content: center;
        max-width: 720px;
        margin: 0 auto;
      }

      .lead {
        font-size: 1rem;
        margin: 0;
      }

      .photo {
        display: grid;
        place-items: center;
        overflow: hidden;
        min-height: 45vh;
      }

      .photo > img {
        width: 100%;
        height: 100%;
        object-fit: contain;
        display: block;
      }

      .hash {
        margin: 0 0 6px 0;
        font-size: 1rem;
        font-weight: 800;
      }

      .muted {
        color: var(--muted);
        font-size: 0.8rem;
        margin: 0;
      }
    </style>
  </head>
  <body>
    <main class="page">
      <p class="lead">
        Don't forget to save your selfie before leaving the page!
      </p>

      <div class="photo">
        <img src="<%= imagePath %>" />
      </div>

      <footer>
        <h1 class="hash">
          #famok | <a href="https://famok.org">Visit the FAM website</a>
        </h1>
        <p class="muted">
          This image is only available on the FAM guest wifi network, and
          expires on <span id="expiration-date"></span>
        </p>
      </footer>
    </main>
    <script>
      let isMobile = {
        Android: function () {
          return navigator.userAgent.match(/Android/i);
        },
        iOS: function () {
          return navigator.userAgent.match(/iPhone|iPad|iPod/i);
        },
      };
      if (isMobile.Android()) {
        document.querySelector(".lead").textContent =
          'Save your selfie! Tap and hold on the image and select "Download Image".';
      } else if (isMobile.iOS()) {
        document.querySelector(".lead").textContent =
          'Save your selfie! Tap and hold on the image and select "Save to Photos".';
      }

      const expirationDate = new Date();
      expirationDate.setDate(expirationDate.getDate() + 2);
      document.getElementById("expiration-date").textContent =
        expirationDate.toLocaleDateString();
    </script>
  </body>
</html>
